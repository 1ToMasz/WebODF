<tests xmlns:text="urn:oasis:names:tc:opendocument:xmlns:text:1.0" xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:c="urn:webodf:names:cursor" xmlns:e="urn:webodf:names:editinfo">
 <test name="AddCursor_Simple">
  <before><office:text><text:p/></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
  </ops>
  <after><office:text><text:p><c:cursor c:memberId="Joe"/></text:p></office:text></after>
 </test>
 <test name="AddCursor_Span">
  <before><office:text><text:p><text:span/></text:p></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
  </ops>
  <after><office:text><text:p><c:cursor c:memberId="Joe"/><text:span/></text:p></office:text></after>
 </test>
 <test name="AddCursor_Text">
  <before><office:text><text:p>a</text:p></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
  </ops>
  <after><office:text><text:p><c:cursor c:memberId="Joe"/>a</text:p></office:text></after>
 </test>
 <test name="AddCursor_Space">
  <before><office:text><text:p> a</text:p></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
  </ops>
  <after><office:text><text:p> <c:cursor c:memberId="Joe"/>a</text:p></office:text></after>
 </test>
 <test name="AddCursor_SpanSpace">
  <before><office:text><text:p> <text:span> a</text:span></text:p></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
  </ops>
  <after><office:text><text:p> <text:span> <c:cursor c:memberId="Joe"/>a</text:span></text:p></office:text></after>
 </test>
 <test name="AddCursor_JustAfterEdit">
  <before><office:text><text:p><editinfo /><text:span>a</text:span></text:p></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
  </ops>
  <after><office:text><text:p><editinfo /><text:span><c:cursor c:memberId="Joe"/>a</text:span></text:p></office:text></after>
 </test>
 <test name="AddCursor_NonEmptySpan">
  <before><office:text><text:p><text:span>a</text:span></text:p></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
  </ops>
  <after><office:text><text:p><text:span><c:cursor c:memberId="Joe"/>a</text:span></text:p></office:text></after>
 </test>
 <test name="AddCursor_NestedSpan">
  <before><office:text><text:p><text:span><text:span>a</text:span></text:span></text:p></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
  </ops>
  <after><office:text><text:p><text:span><text:span><c:cursor c:memberId="Joe"/>a</text:span></text:span></text:p></office:text></after>
 </test>
 <test name="AddCursor_NestedSpan_JustAfterEdit_Level1">
  <before><office:text><text:p><editinfo /><text:span><text:span>a</text:span></text:span></text:p></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
  </ops>
  <after><office:text><text:p><editinfo /><text:span><text:span><c:cursor c:memberId="Joe"/>a</text:span></text:span></text:p></office:text></after>
 </test>
 <test name="AddCursor_NestedSpan_JustAfterEdit_Level2">
  <before><office:text><text:p><text:span><editinfo /><text:span>a</text:span></text:span></text:p></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
  </ops>
  <after><office:text><text:p><text:span><editinfo /><text:span><c:cursor c:memberId="Joe"/>a</text:span></text:span></text:p></office:text></after>
 </test>
<!--
 <test name="RemoveCursor_Simple">
  <before><office:text><text:p><c:cursor c:memberId="Joe"/></text:p></office:text></before>
  <ops>
   <op optype="RemoveCursor" memberid="Joe"/>
  </ops>
  <after><office:text><text:p/></office:text></after>
 </test>
-->
 <test name="AddRemoveCursor_Simple">
  <before><office:text><text:p/></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
   <op optype="RemoveCursor" memberid="Joe"/>
  </ops>
  <after><office:text><text:p/></office:text></after>
 </test>
 <test name="InsertText_Simple">
  <before><office:text><text:p/></office:text></before>
  <ops>
   <op optype="InsertText" position="0" text="hello"/>
  </ops>
  <after><office:text><text:p>hello</text:p></office:text></after>
 </test>
 <test name="InsertRemoveText_Simple">
  <before><office:text><text:p/></office:text></before>
  <ops>
   <op optype="InsertText" position="0" text="hello"/>
   <op optype="RemoveText" position="0" length="5"/>
  </ops>
  <after><office:text><text:p/></office:text></after>
 </test>
 <test name="InsertText_Simple2">
  <before><office:text><text:p>a</text:p></office:text></before>
  <ops>
   <op optype="InsertText" position="0" text="b"/>
  </ops>
  <after><office:text><text:p>ba</text:p></office:text></after>
 </test>
 <test name="InsertText_Simple3">
  <before><office:text><text:p>a</text:p></office:text></before>
  <ops>
   <op optype="InsertText" position="1" text="b"/>
  </ops>
  <after><office:text><text:p>ab</text:p></office:text></after>
 </test>
 <test name="InsertText_Span">
  <before><office:text><text:p><text:span>a</text:span></text:p></office:text></before>
  <ops>
   <op optype="InsertText" position="1" text="b"/>
  </ops>
  <after><office:text><text:p><text:span>ab</text:span></text:p></office:text></after>
 </test>
 <test name="InsertText_Span2">
  <before><office:text><text:p><text:span>a</text:span></text:p></office:text></before>
  <ops>
   <op optype="InsertText" position="0" text="b"/>
  </ops>
  <after><office:text><text:p><text:span>ba</text:span></text:p></office:text></after>
 </test>
 <test name="InsertText_BeforeSpace">
  <before><office:text><text:p><text:s/></text:p></office:text></before>
  <ops>
   <op optype="InsertText" position="0" text="a"/>
  </ops>
  <after><office:text><text:p>a<text:s/></text:p></office:text></after>
 </test>
 <test name="InsertText_AfterSpace">
  <before><office:text><text:p><text:s/></text:p></office:text></before>
  <ops>
   <op optype="InsertText" position="1" text="a"/>
  </ops>
  <after><office:text><text:p><text:s/>a</text:p></office:text></after>
 </test>
 <test name="InsertText_AfterSpace2">
  <before><office:text><text:p>a<text:s/></text:p></office:text></before>
  <ops>
   <op optype="InsertText" position="2" text="b"/>
  </ops>
  <after><office:text><text:p>a<text:s/>b</text:p></office:text></after>
 </test>
 <test name="InsertTextWithCursor_AfterSpace2">
  <before><office:text><text:p>a<text:s/></text:p><text:p/></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
   <op optype="MoveCursor" memberid="Joe" number="2"/>
   <op optype="InsertText" position="2" text="b"/>
  </ops>
  <after><office:text><text:p>a<text:s/>b<c:cursor c:memberId="Joe"/></text:p><text:p/></office:text></after>
 </test>
 <test name="InsertText_BeforeSpan">
  <before><office:text><text:p>a<text:span>b</text:span></text:p><text:p/></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
   <op optype="InsertText" position="0" text="c"/>
  </ops>
  <after><office:text><text:p>c<c:cursor c:memberId="Joe"/>a<text:span>b</text:span></text:p><text:p/></office:text></after>
 </test>
 <test name="InsertText_withCursor">
  <before><office:text><text:p>a</text:p><text:p/></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
   <op optype="InsertText" position="0" text="b"/>
  </ops>
  <after><office:text><text:p>b<c:cursor c:memberId="Joe"/>a</text:p><text:p/></office:text></after>
 </test>
 <test name="InsertText_withCursor2">
  <before><office:text><text:p>ab c</text:p><text:p/></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
   <op optype="MoveCursor" memberid="Joe" number="1"/>
   <op optype="InsertText" position="1" text="d"/>
  </ops>
  <after><office:text><text:p>ad<c:cursor c:memberId="Joe"/>b c</text:p><text:p/></office:text></after>
 </test>
 <test name="InsertSpace">
  <before><office:text><text:p/></office:text></before>
  <ops>
   <op optype="InsertText" position="0" text=" "/>
  </ops>
  <after><office:text><text:p><text:s> </text:s></text:p></office:text></after>
 </test>
 <test name="RemoveSpace">
  <before><office:text><text:p><text:s> </text:s></text:p></office:text></before>
  <ops>
   <op optype="RemoveText" position="0" length="1"/>
  </ops>
  <after><office:text><text:p/></office:text></after>
 </test>
 <test name="AddRemoveSpace">
  <before><office:text><text:p>ab</text:p></office:text></before>
  <ops>
   <op optype="InsertText" position="1" text="  "/>
   <op optype="RemoveText" position="1" length="1"/>
  </ops>
  <after><office:text><text:p>a<text:s> </text:s>b</text:p></office:text></after>
 </test>
 <test name="RemoveBackwards">
  <before><office:text><text:p>A</text:p></office:text></before>
  <ops>
   <op optype="RemoveText" position="1" length="-1"/>
  </ops>
  <after><office:text><text:p/></office:text></after>
 </test>
 <test name="InsertRemoveText_Simple_Backwards">
  <before><office:text><text:p/></office:text></before>
  <ops>
   <op optype="InsertText" position="0" text="ABC"/>
   <op optype="RemoveText" position="3" length="-2"/>
   <op optype="RemoveText" position="1" length="-1"/>
  </ops>
  <after><office:text><text:p/></office:text></after>
 </test>
 <test name="RemoveSpace2">
  <before><office:text><text:p>a<text:s> </text:s><text:s> </text:s></text:p></office:text></before>
  <ops>
   <op optype="RemoveText" position="2" length="-1"/>
  </ops>
  <after><office:text><text:p>a<text:s> </text:s></text:p></office:text></after>
 </test>
 <test name="Remove_backspaceMerge1">
  <before><office:text><text:p text:style-name="A">abcd</text:p><text:p text:style-name="B">efgh</text:p></office:text></before>
  <ops>
   <op optype="RemoveText" position="5" length="-1"/>
  </ops>
  <after><office:text><text:p text:style-name="A">abcdefgh</text:p></office:text></after>
 </test>
 <test name="Remove_backspaceMerge2">
  <before><office:text><text:p text:style-name="A">abc<text:span text:style-name="B">d</text:span></text:p><text:p text:style-name="C"><text:span text:style-name="D">efgh</text:span></text:p></office:text></before>
  <ops>
   <op optype="RemoveText" position="7" length="-5"/>
  </ops>
  <after><office:text><text:p text:style-name="A">ab<text:span text:style-name="D">gh</text:span></text:p></office:text></after>
 </test>
 <test name="Remove_deleteMerge1">
  <before><office:text><text:p text:style-name="A">abcd</text:p><text:p text:style-name="B">efgh</text:p></office:text></before>
  <ops>
   <op optype="RemoveText" position="4" length="1"/>
  </ops>
  <after><office:text><text:p text:style-name="A">abcdefgh</text:p></office:text></after>
 </test>
 <test name="Remove_deleteMerge2">
  <before><office:text><text:p text:style-name="A">abc<text:span text:style-name="B">d</text:span></text:p><text:p text:style-name="C"><text:span text:style-name="D">efgh</text:span></text:p></office:text></before>
  <ops>
   <op optype="RemoveText" position="2" length="5"/>
  </ops>
  <after><office:text><text:p text:style-name="A">ab<text:span text:style-name="D">gh</text:span></text:p></office:text></after>
 </test>
 <test name="Remove_backspaceMergeEmpty1">
  <before><office:text><text:p text:style-name="A"></text:p><text:p text:style-name="B">efgh</text:p></office:text></before>
  <ops>
   <op optype="RemoveText" position="1" length="-1"/>
  </ops>
  <after><office:text><text:p text:style-name="B">efgh</text:p></office:text></after>
 </test>
 <test name="Remove_deleteMergeEmpty1">
  <before><office:text><text:p text:style-name="A"></text:p><text:p text:style-name="B">efgh</text:p></office:text></before>
  <ops>
   <op optype="RemoveText" position="0" length="1"/>
  </ops>
  <after><office:text><text:p text:style-name="B">efgh</text:p></office:text></after>
 </test>
 <test name="SpaceBetweenParagraphs">
  <before><office:text><text:p>a</text:p> <text:p>b</text:p></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
   <op optype="MoveCursor" memberid="Joe" number="2"/>
  </ops>
  <after><office:text><text:p>a</text:p> <text:p><c:cursor c:memberId="Joe"/>b</text:p></office:text></after>
 </test>
 <test name="20130517_split_text_2space">
  <before><office:text><text:p>20130517_split_text_2space</text:p></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Joe"/>
   <op optype="MoveCursor" memberid="Joe" number="9"/>
   <op optype="InsertText" position="9" text="A"/>
   <op optype="InsertText" position="10" text=" "/>
   <op optype="InsertText" position="11" text=" "/>
   <op optype="MoveCursor" memberid="Joe" number="-1"/>
   <op optype="MoveCursor" memberid="Joe" number="-1"/>
  </ops>
  <after><office:text><text:p>20130517_A<c:cursor c:memberId="Joe"/><text:s> </text:s><text:s> </text:s>split_text_2space</text:p></office:text></after>
 </test>
 <test name="InsertText_multiCursors">
  <before><office:text><text:p>abcdefgh</text:p></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Alice"/>
   <op optype="MoveCursor" memberid="Alice" number="3"/>
   <op optype="AddCursor" memberid="Bob"/>
   <op optype="MoveCursor" memberid="Bob" number="3"/>
   <op optype="AddCursor" memberid="Eve"/>
   <op optype="MoveCursor" memberid="Eve" number="3"/>
   <op optype="InsertText" memberid="Eve" position="3" text="123"/>
  </ops>
  <after><office:text><text:p>abc<c:cursor c:memberId="Alice"/><c:cursor c:memberId="Bob"/>123<c:cursor c:memberId="Eve"/>defgh</text:p></office:text></after>
 </test>
 <test name="SplitParagraph_multiCursors">
  <before><office:text><text:p>abcdefgh</text:p></office:text></before>
  <ops>
   <op optype="AddCursor" memberid="Alice"/>
   <op optype="MoveCursor" memberid="Alice" number="3"/>
   <op optype="AddCursor" memberid="Bob"/>
   <op optype="MoveCursor" memberid="Bob" number="3"/>
   <op optype="AddCursor" memberid="Eve"/>
   <op optype="MoveCursor" memberid="Eve" number="3"/>
   <op optype="SplitParagraph" memberid="Eve" position="3"/>
  </ops>
  <after><office:text><text:p>abc<c:cursor c:memberId="Alice"/><c:cursor c:memberId="Bob"/></text:p><text:p><c:cursor c:memberId="Eve"/>defgh</text:p></office:text></after>
 </test>
 <test name="DeleteExposesSpace1">
  <before><office:text><text:p> a b </text:p></office:text></before>
  <ops>
   <op optype="RemoveText" position="0" length="1"/>
  </ops>
  <after><office:text><text:p> <text:s> </text:s>b </text:p></office:text></after>
 </test>
 <test name="DeleteExposesSpace2">
  <before><office:text><text:p> a b </text:p></office:text></before>
  <ops>
   <op optype="RemoveText" position="2" length="1"/>
  </ops>
  <after><office:text><text:p> a<text:s> </text:s> </text:p></office:text></after>
 </test>
 <test name="BackspaceExposesSpace1">
  <before><office:text><text:p> a b </text:p></office:text></before>
  <ops>
   <op optype="RemoveText" position="1" length="-1"/>
  </ops>
  <after><office:text><text:p> <text:s> </text:s>b </text:p></office:text></after>
 </test>
 <test name="BackspaceExposesSpace2">
  <before><office:text><text:p> a b </text:p></office:text></before>
  <ops>
   <op optype="RemoveText" position="3" length="-1"/>
  </ops>
  <after><office:text><text:p> a<text:s> </text:s> </text:p></office:text></after>
 </test>
 <test name="SplitListParagraph_singleCursor">
  <before><office:text><text:list><text:list-item><text:p>helloworld</text:p></text:list-item></text:list></office:text></before>
   <ops>
    <op optype="AddCursor" memberid="Bob"/>
    <op optype="MoveCursor" memberid="Bob" number="5"/>
    <op optype="SplitParagraph" memberid="Bob" position="5"/>
   </ops>
  <after><office:text><text:list><text:list-item><text:p>hello</text:p></text:list-item><text:list-item><text:p><c:cursor c:memberId="Bob"/>world</text:p></text:list-item></text:list></office:text></after>
 </test>
</tests>
